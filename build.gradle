// Adds empty build, clean, and assemble tasks to project
plugins {
    id 'base'
}

allprojects {
    // This is where you select which operating system to build for.

    // Uncomment the line below to build for windows
    ext.buildType = "windows"

    // Uncomment the line below to build for a Raspberry Pi running raspbian
    //ext.buildType = "arm-raspbian"

    // Uncomment the line below to build for an armhf device such as a Jetson or a Beaglebone Black
    //ext.buildType = "armhf"

    ext.outputDirectory = file("${rootDir}/output")
}

// Normally this is implicit with java plugin, but base plugin makes no sub-project assumptions
build.dependsOn ':CameraServer:build', ':CameraVision:build', ':NTSimulator:build'

task copyStartupScript(type: Copy) {
  description "Copies the startup application to the root output directory."
  destinationDir = outputDirectory
  if (buildType == "windows") {
    from (file("startup.bat")) {
    }
    from (file("local-debug-startup.bat")) {
    }
  }
}

build.dependsOn copyStartupScript

clean {
    inputs.dir outputDirectory
    description "Remove the root output directory."
    delete outputDirectory
}
